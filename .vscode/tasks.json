{
  // VSCode Tasks for Anki Viewer Development
  // Press Ctrl+Shift+P and type "Tasks: Run Task" to execute
  "version": "2.0.0",
  "tasks": [
    // Deployment tasks
    {
      "label": "Deploy to Batocera",
      "type": "shell",
      "command": "powershell",
      "args": [
        "-ExecutionPolicy", "Bypass",
        "-File", "${workspaceFolder}/dev-tools/deploy.ps1"
      ],
      "group": "build",
      "presentation": {
        "reveal": "always",
        "panel": "new"
      },
      "problemMatcher": []
    },
    {
      "label": "Deploy and Restart",
      "type": "shell",
      "command": "powershell",
      "args": [
        "-ExecutionPolicy", "Bypass",
        "-File", "${workspaceFolder}/dev-tools/deploy.ps1",
        "-Restart"
      ],
      "group": {
        "kind": "build",
        "isDefault": true
      },
      "presentation": {
        "reveal": "always",
        "panel": "new"
      },
      "problemMatcher": []
    },
    {
      "label": "Deploy and Update",
      "type": "shell",
      "command": "powershell",
      "args": [
        "-ExecutionPolicy", "Bypass",
        "-File", "${workspaceFolder}/dev-tools/deploy.ps1",
        "-Update"
      ],
      "group": "build",
      "presentation": {
        "reveal": "always",
        "panel": "new"
      },
      "problemMatcher": []
    },

    // App management tasks
    {
      "label": "Restart Flask",
      "type": "shell",
      "command": "powershell",
      "args": [
        "-ExecutionPolicy", "Bypass",
        "-File", "${workspaceFolder}/dev-tools/remote-cmd.ps1",
        "restart"
      ],
      "group": "none",
      "presentation": {
        "reveal": "always",
        "panel": "shared"
      },
      "problemMatcher": []
    },
    {
      "label": "Stop Flask",
      "type": "shell",
      "command": "powershell",
      "args": [
        "-ExecutionPolicy", "Bypass",
        "-File", "${workspaceFolder}/dev-tools/remote-cmd.ps1",
        "stop"
      ],
      "group": "none",
      "presentation": {
        "reveal": "always",
        "panel": "shared"
      },
      "problemMatcher": []
    },
    {
      "label": "Check Flask Status",
      "type": "shell",
      "command": "powershell",
      "args": [
        "-ExecutionPolicy", "Bypass",
        "-File", "${workspaceFolder}/dev-tools/remote-cmd.ps1",
        "status"
      ],
      "group": "none",
      "presentation": {
        "reveal": "always",
        "panel": "shared"
      },
      "problemMatcher": []
    },
    {
      "label": "View Flask Logs",
      "type": "shell",
      "command": "powershell",
      "args": [
        "-ExecutionPolicy", "Bypass",
        "-File", "${workspaceFolder}/dev-tools/remote-cmd.ps1",
        "logs"
      ],
      "group": "none",
      "presentation": {
        "reveal": "always",
        "panel": "new"
      },
      "problemMatcher": []
    },
    {
      "label": "Follow Flask Logs",
      "type": "shell",
      "command": "powershell",
      "args": [
        "-ExecutionPolicy", "Bypass",
        "-File", "${workspaceFolder}/dev-tools/remote-cmd.ps1",
        "logs",
        "-Follow"
      ],
      "group": "none",
      "presentation": {
        "reveal": "always",
        "panel": "new"
      },
      "isBackground": true,
      "problemMatcher": []
    },

    // SSH tasks
    {
      "label": "Open SSH Shell",
      "type": "shell",
      "command": "powershell",
      "args": [
        "-ExecutionPolicy", "Bypass",
        "-File", "${workspaceFolder}/dev-tools/remote-cmd.ps1",
        "shell"
      ],
      "group": "none",
      "presentation": {
        "reveal": "always",
        "panel": "new"
      },
      "problemMatcher": []
    },

    // Make tasks (if you have make/nmake installed)
    {
      "label": "Make: Deploy",
      "type": "shell",
      "command": "make",
      "args": ["deploy"],
      "group": "build",
      "presentation": {
        "reveal": "always",
        "panel": "shared"
      },
      "problemMatcher": []
    },
    {
      "label": "Make: Restart",
      "type": "shell",
      "command": "make",
      "args": ["restart"],
      "group": "build",
      "presentation": {
        "reveal": "always",
        "panel": "shared"
      },
      "problemMatcher": []
    },
    {
      "label": "Make: Status",
      "type": "shell",
      "command": "make",
      "args": ["status"],
      "group": "none",
      "presentation": {
        "reveal": "always",
        "panel": "shared"
      },
      "problemMatcher": []
    },

    // Local development (if you want to test locally on Windows)
    {
      "label": "Run Flask Locally",
      "type": "shell",
      "command": "python",
      "args": [
        "${workspaceFolder}/share/roms/anki/app.py"
      ],
      "options": {
        "cwd": "${workspaceFolder}/share/roms/anki"
      },
      "group": "test",
      "presentation": {
        "reveal": "always",
        "panel": "new"
      },
      "isBackground": true,
      "problemMatcher": []
    }
  ]
}
